---
title: "Microsoft Graph ã®ãƒ—ãƒ¬ã‚¼ãƒ³ã‚¹æƒ…å ± API ãŒ Public Preview ã«ãªã‚Šã¾ã—ãŸ"
emoji: "ğŸ’»"
type: "tech"
topics: ["microsoftgraph"]
published: true
---

:::message
ã“ã®è¨˜äº‹ã¯ã¯ã¦ãªãƒ–ãƒ­ã‚°ã« 2019/12/20 ã«æŠ•ç¨¿ã—ãŸã‚‚ã®ã®è»¢è¼‰ã§ã™ã€‚
:::

å…ƒãƒã‚¿ã¯ã“ã¡ã‚‰ã€‚

https://developer.microsoft.com/en-us/graph/blogs/microsoft-graph-presence-apis-are-now-available-in-public-preview?WT.mc_id=M365-MVP-5002941

ã“ã‚Œã¾ã§ãƒ—ãƒ¬ã‚¼ãƒ³ã‚¹æƒ…å ±ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€Skype for Business ã® Unified Communications Web API (UCWA) ã¨ã„ã†ã‚‚ã®ã‚’ä½¿ã‚ãªã‘ã‚Œã°ãªã‚‰ãªã‹ã£ãŸã®ã§ã™ãŒã€ä»Šå›ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã‚ˆã‚Šã€ã‚ˆã‚Šç°¡å˜ã«ãƒ—ãƒ¬ã‚¼ãƒ³ã‚¹æƒ…å ±ã‚’å–å¾—ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã‚‚ã¡ã‚ã‚“ Microsoft Teams ã®ãƒ—ãƒ¬ã‚¼ãƒ³ã‚¹æƒ…å ±ã«ã‚‚å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

è©¦ã—ã« Graph Explorer ã‚’ä½¿ã£ã¦ API ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ã« `Presence.Read` ãŠã‚ˆã³ `Presence.Read.All` ãŒå¢—ãˆã¦ã„ã‚‹ã®ã§è¨±å¯ã™ã‚‹ã®ã‚’å¿˜ã‚Œãšã«ã€‚

```
POST https://graph.microsoft.com/beta/communications/getPresencesByUserId
Content-Type: application/json

{
    "ids": ["4b34f1e2-0c77-4fbd-a8cf-94a4606021ee"]
}
```

ã¨å®Ÿè¡Œã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªçµæœãŒè¿”ã£ã¦ãã¾ã™ã€‚

```json
{
    "@odata.context": "https://graph.microsoft.com/beta/$metadata#Collection(presence)",
    "value": [
        {
            "@odata.type": "#microsoft.graph.presence",
            "availability": "Offline",
            "activity": "Offline",
            "id": "4b34f1e2-0c77-4fbd-a8cf-94a4606021ee"
        }
    ]
}
```

ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã«ãªã£ã¦ã„ã‚‹ã¨ãã¯ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒå¤‰ã‚ã‚Šã¾ã™ã€‚

```json
{
    "@odata.context": "https://graph.microsoft.com/beta/$metadata#Collection(presence)",
    "value": [
        {
            "@odata.type": "#microsoft.graph.presence",
            "availability": "Available",
            "activity": "Available",
            "id": "4b34f1e2-0c77-4fbd-a8cf-94a4606021ee"
        }
    ]
}
```

`getPresencesByUserId` ã¯ ID ã‚’è¤‡æ•°æŒ‡å®šã§ãã‚‹ã®ã§ã€ãƒ—ãƒ¬ã‚¼ãƒ³ã‚¹æƒ…å ±ã‚’ä¸€è¦§è¡¨ç¤ºã™ã‚‹ã¿ãŸã„ãªã“ã¨ã‚‚ã¨ã¦ã‚‚ç°¡å˜ã«ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã¯ä¾¿åˆ©ãã†ã§ã™ã­ï¼
