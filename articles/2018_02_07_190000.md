---
title: "SharePoint 2013 REST API の GetByLoginName メソッドを呼び出すとエラーが発生する"
emoji: "💻"
type: "tech"
topics: ["sharepoint"]
published: true
---

:::message
この記事ははてなブログに 2018/2/7 に投稿したものの転載です。
:::

:::message alert
2018/2/9 追記: `GetByLoginName('i:0#.w|domain\user')` は駄目で `GetByLoginName(@v)?@v='i:0#.w|domain\user'` の形式なら大丈夫らしいです。なるほど。
:::

SharePoint 2013 で REST API の `UserCollection.GetByLoginName` メソッドを呼び出したときに、以下のメッセージでエラーが発生することがあります。

> 危険な可能性のある Request.Path 値がクライアント (:) から検出されました。

エラーの詳細については以下の記事が詳しいです。

https://blog.daruyanagi.jp/entry/2013/04/21/143904

何が問題かというと、SharePoint 2013 以降はクレーム ベース認証なので、ログイン名は `i:0#.w|domain\user` の形式になり、要するに常にコロンが入るということです。ちなみに SharePoint Online では問題ないです。
